<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Booking Successful | Pathan Tours & Travels</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body {
            background: #f4fff4;
            font-family: Arial, sans-serif;
        }
        
        .success-box {
            max-width: 600px;
            margin: 60px auto;
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 0 20px rgba(0, 128, 0, 0.25);
        }
        
        .whatsapp-btn {
            background: #25D366;
            color: white;
            border: none;
            padding: 14px;
            font-size: 18px;
            border-radius: 8px;
            width: 100%;
        }
        
        .whatsapp-btn:hover {
            background: #1ebe5d;
        }
        
        .label {
            font-weight: 600;
        }
    </style>
</head>

<body>

    <div class="success-box text-center">

        <h2 class="text-success mb-2">âœ… Booking Successful</h2>
        <p class="mb-4">Thank you <b>{{ booking.name }}</b> ğŸ™</p>

        <hr>

        <div class="text-start">
            <p><span class="label">ğŸ“ Route:</span> {{ booking.pickup }} â†’ {{ booking.drop }}</p>

            <p><span class="label">ğŸš— Distance:</span> {{ booking.distance_km }} KM</p>

            <p><span class="label">ğŸ’° Total Fare:</span> â‚¹{{ booking.total_price }}</p>

            <p>
                <span class="label text-success">ğŸ’µ Advance Paid:</span> â‚¹{{ booking.advance_paid }}
            </p>

            <!-- âœ… REMAINING AMOUNT (AUTO CALCULATED) -->
            <p>
                <span class="label text-danger">ğŸ’³ Remaining Amount:</span> â‚¹{{ booking.remaining_amount }}
            </p>

            <p>
                <span class="label">â³ Status:</span>
                <span class="badge bg-warning text-dark">
                {{ booking.get_status_display }}
            </span>
            </p>
        </div>

        {% if booking.remaining_amount > 0 %}
        <div class="alert alert-success mt-3">
            ğŸ‘‰ Remaining amount will be paid at trip start
        </div>
        {% else %}
        <div class="alert alert-info mt-3">
            âœ… Full payment received
        </div>
        {% endif %}

        <!-- WhatsApp Button -->
        <button class="whatsapp-btn mt-3" onclick="sendWhatsApp()">
        ğŸ“² Send Booking Details on WhatsApp
    </button>
        <a href="{% url 'invoice' booking.id %}" class="btn btn-primary w-100 mt-2">
   ğŸ“„ Download Invoice (PDF)
</a>


        <br><br>

        <a href="/" class="btn btn-outline-success">â¬… Back to Home</a>
    </div>

    <!-- WhatsApp Script -->
    <script>
        function sendWhatsApp() {
            let phone = "91{{ booking.phone }}";

            let msg = `Hello {{ booking.name }} ğŸ‘‹
Your booking request is received with Pathan Tours & Travels ğŸš—

ğŸ“ Route: {{ booking.pickup }} â†’ {{ booking.drop }}
ğŸš— Distance: {{ booking.distance_km }} KM
ğŸ’° Total Fare: â‚¹{{ booking.total_price }}
ğŸ’µ Advance Paid: â‚¹{{ booking.advance_paid }}
ğŸ’³ Remaining: â‚¹{{ booking.remaining_amount }}
â³ Status: {{ booking.get_status_display }}

We will contact you shortly for confirmation ğŸ™`;

            window.open(
                `https://wa.me/${phone}?text=${encodeURIComponent(msg)}`,
                '_blank'
            );
        }
    </script>

</body>

</html>